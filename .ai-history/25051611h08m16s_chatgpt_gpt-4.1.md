# Option to not search about the target enterprise 

The user generally knows the target enterprise.
But when the job advertisement is made by a headhunter, the user may not know the target enterprise.

Therefore, the user should be able to choose if he wants to search about the target enterprise or not.

Propose me the changes to make to the user interface and the harcoded prompts in order to handle this option.



# This is gpt-4.1 answer (5k in, 0k out)

Great feature! Here’s a **step-by-step proposal** for both the user interface and the prompt logic to allow the user to choose whether to include information about the target enterprise.

---

## 1. User Interface Changes (`index.ejs`)

**Add a checkbox** to let the user specify if they want to include information about the company.

### Where to add:
Just below the "Company name" input.

### Example code to add in your form:
```html
<div class="mb-3">
  <label for="company" class="form-label">Company name</label>
  <input type="text" class="form-control" id="company" placeholder="Enter company name" name="company">
  <div class="form-check mt-2">
    <input class="form-check-input" type="checkbox" value="on" id="includeCompanyInfo" name="includeCompanyInfo" checked>
    <label class="form-check-label" for="includeCompanyInfo">
      Include information about the company in the cover letter
    </label>
  </div>
</div>
```
- The checkbox is **checked by default** (current behavior).
- If unchecked, the system will **not search or mention the company** in the prompt.

---

## 2. Backend Changes

### a. In `index.ts`

**Read the new checkbox value** in your POST handler:

```typescript
const { company, job, language, position, words, token, includeCompanyInfo } = req.body;
```

**Pass this value to your AI functions:**
- Update all calls to `getGeminiCoverLetterResult` and `getOpenAICoverLetterResult` to include this new parameter.

### b. Update AI function signatures

**In `ask-gemini.ts` and `ask-openai.ts`:**

Change function signatures to:
```typescript
export async function getGeminiCoverLetterResult(company: string, position: string, job: string, language: string, words: string, includeCompanyInfo: boolean): Promise<string>
```
And similarly for OpenAI.

**Pass this parameter down to the prompt/system-instruction functions.**

---

## 3. Prompt/Instruction Logic

### a. In `system-instruction.ts`

**Add a new parameter** to `getSystemInstructionCoverLetter`:
```typescript
export function getSystemInstructionCoverLetter(company: string, job: string, words: string, language: string, includeCompanyInfo: boolean): string
```

**Update the logic:**
- If `includeCompanyInfo` is `false`, do not add any company-specific instructions or context.
- If `includeCompanyInfo` is `true`, keep the current behavior.

**Example:**
```typescript
let company_search_fr = '';
let company_search_en = '';

if (includeCompanyInfo && company !== 'Unknown') {
  company_search_fr = 'Prends ce que tu sais sur la société "' + company + '".';
  company_search_en = 'Grab what you have about the company "' + company + '".';
}
```
- Use `company_search_fr` and `company_search_en` as before.

---

## 4. Summary of Changes

- **UI:** Add a checkbox for "Include information about the company".
- **Backend:** Read the checkbox value, pass it to the AI prompt functions.
- **Prompt logic:** Only include company-specific instructions if the checkbox is checked.

---

## 5. Example: How the POST handler changes

```typescript
const includeCompanyInfo = req.body.includeCompanyInfo === 'on';

const geminiCoverLetter = await getGeminiCoverLetterResult(company, position, job, language, words, includeCompanyInfo);
const openAICoverLetter = await getOpenAICoverLetterResult(company, position, job, language, words, includeCompanyInfo);
```

---

## 6. Example: How the system instruction function changes

```typescript
export function getSystemInstructionCoverLetter(company: string, job: string, words: string, language: string, includeCompanyInfo: boolean): string {
  // ...load CVs...
  let company_search_fr = '';
  let company_search_en = '';

  if (includeCompanyInfo && company !== 'Unknown') {
    company_search_fr = 'Prends ce que tu sais sur la société "' + company + '".';
    company_search_en = 'Grab what you have about the company "' + company + '".';
  }
  // ...rest of the function...
}
```

---

**Let me know if you want the full code for each file!**

