# Option to not search about the target enterprise 

The user generally knows the target enterprise.
But when the job advertisement is made by a headhunter, the user may not know the target enterprise.

Therefore, the user should be able to choose if he wants to search about the target enterprise or not.

Propose me the changes to make to the user interface and the harcoded prompts in order to handle this option.



# This is gpt-4.1 answer (5k in, 1k out)

Great feature idea! Here’s a **step-by-step proposal** for both the user interface and the prompt logic to allow the user to choose whether to include information about the target enterprise.

---

## 1. User Interface Changes (`index.ejs`)

**Add a checkbox** to the form so the user can indicate if they want to search about the company or not.

### Add this after the "Company name" input:

```html
<div class="mb-3 form-check">
  <input type="checkbox" class="form-check-input" id="noCompanySearch" name="noCompanySearch" value="on">
  <label class="form-check-label" for="noCompanySearch">
    I do not want to search or mention the target company (for headhunter/unknown company)
  </label>
</div>
```

**Resulting section:**

```html
<div class="mb-3">
  <label for="company" class="form-label">Company name</label>
  <input type="text" class="form-control" id="company" placeholder="Enter company name" name="company" >
</div>
<div class="mb-3 form-check">
  <input type="checkbox" class="form-check-input" id="noCompanySearch" name="noCompanySearch" value="on">
  <label class="form-check-label" for="noCompanySearch">
    I do not want to search or mention the target company (for headhunter/unknown company)
  </label>
</div>
```

---

## 2. Backend Changes (`index.ts`)

**Read the new checkbox value** in your POST handler:

```typescript
const { company, job, language, position, words, token, noCompanySearch } = req.body;
```

**Pass this value to your AI functions** (add as a new parameter):

- `getGeminiCoverLetterResult(company, position, job, language, words, noCompanySearch)`
- `getOpenAICoverLetterResult(company, position, job, language, words, noCompanySearch)`

---

## 3. Update AI Service Functions

**Update function signatures** in `ask-gemini.ts` and `ask-openai.ts` to accept the new parameter, and pass it to the system instruction:

```typescript
export async function getGeminiCoverLetterResult(
  company: string, position: string, job: string, language: string, words: string, noCompanySearch: string
): Promise<string> {
  // ...
  systemInstruction: getSystemInstructionCoverLetter(company, job, words, language, noCompanySearch)
  // ...
}
```

Do the same for OpenAI.

---

## 4. Update System Instruction Logic (`system-instruction.ts`)

**Update the function signature**:

```typescript
export function getSystemInstructionCoverLetter(
  company: string, job: string, words: string, language: string, noCompanySearch?: string
): string {
```

**Change the logic for company search:**

```typescript
let company_search_fr = '';
let company_search_en = '';

if (noCompanySearch === 'on' || company === 'Unknown' || !company) {
  company_search_fr = '';
  company_search_en = '';
} else {
  company_search_fr = 'Prends ce que tu sais sur la société "' + company + '".';
  company_search_en = 'Grab what you have about the company "' + company + '".';
}
```

**(Optional) Also, in the prompt, you may want to avoid mentioning the company name if `noCompanySearch` is on.**

---

## 5. Update Prompt Logic (`prompt.ts`)

**Update the function signature**:

```typescript
export function getPromptCoverLetter(
  language: string, company: string, position: string, words: string, noCompanySearch?: string
): string {
  if (language === 'French') {
    if (noCompanySearch === 'on' || company === 'Unknown' || !company) {
      return `Écris une lettre de motivation de ${words} mots pour postuler au poste "${position}".`;
    }
    return `Écris une lettre de motivation de ${words} mots pour postuler au poste "${position}" dans la société "${company}".`;
  }
  if (language === 'English') {
    if (noCompanySearch === 'on' || company === 'Unknown' || !company) {
      return `Write a ${words} words cover letter to apply for the "${position}" position.`;
    }
    return `Write a ${words} words cover letter to apply for the "${position}" position at the "${company}" company.`;
  }
  return '';
}
```

---

## 6. Update All Function Calls

Make sure all calls to `getPromptCoverLetter` and `getSystemInstructionCoverLetter` pass the new `noCompanySearch` parameter.

---

## **Summary Table**

| File                | Change                                                                 |
|---------------------|------------------------------------------------------------------------|
| `views/index.ejs`   | Add checkbox for "no company search"                                   |
| `src/index.ts`      | Read checkbox value, pass to AI functions                              |
| `src/ask-gemini.ts` | Update function signatures, pass to system instruction and prompt       |
| `src/ask-openai.ts` | Update function signatures, pass to system instruction and prompt       |
| `src/prompt.ts`     | Update prompt logic to omit company if needed                          |
| `src/system-instruction.ts` | Update system instruction logic to omit company if needed       |

---

**Let me know if you want the full code for any of these steps!**

